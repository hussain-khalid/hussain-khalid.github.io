"use strict";(self.webpackChunktemp_docusaurus=self.webpackChunktemp_docusaurus||[]).push([[595],{3694:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>T,contentTitle:()=>C,default:()=>D,frontMatter:()=>_,metadata:()=>t,toc:()=>I});const t=JSON.parse('{"id":"api-documentation/sdk-documentation/video-calling-sdk-guide","title":"SDK Quickstart","description":"Complete guide to integrate Video Calling SDK across multiple platforms including JavaScript, React Native, Java, C++, and C# with code examples and best practices.","source":"@site/docs/api-documentation/sdk-documentation/video-calling-sdk-guide.md","sourceDirName":"api-documentation/sdk-documentation","slug":"/api-documentation/sdk-documentation/video-calling-sdk-guide","permalink":"/docs/api-documentation/sdk-documentation/video-calling-sdk-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api-documentation/sdk-documentation/video-calling-sdk-guide.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"SDK Quickstart","description":"Complete guide to integrate Video Calling SDK across multiple platforms including JavaScript, React Native, Java, C++, and C# with code examples and best practices."},"sidebar":"writingSamplesSidebar","previous":{"title":"Overview","permalink":"/docs/api-documentation/overview"},"next":{"title":"REST APIs for Video Calling","permalink":"/docs/api-documentation/rest-apis/api-getting-started"}}');var a=i(4848),r=i(8453),s=i(6540),o=i(4164),l=i(3104),d=i(6347),c=i(205),h=i(7485),u=i(1682),p=i(679);function m(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function x(e){const{values:n,children:i}=e;return(0,s.useMemo)(()=>{const e=n??function(e){return m(e).map(({props:{value:e,label:n,attributes:i,default:t}})=>({value:e,label:n,attributes:i,default:t}))}(i);return function(e){const n=(0,u.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,i])}function j({value:e,tabValues:n}){return n.some(n=>n.value===e)}function g({queryString:e=!1,groupId:n}){const i=(0,d.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,h.aZ)(t),(0,s.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(i.location.search);n.set(t,e),i.replace({...i.location,search:n.toString()})},[t,i])]}function v(e){const{defaultValue:n,queryString:i=!1,groupId:t}=e,a=x(e),[r,o]=(0,s.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!j({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const i=n.find(e=>e.default)??n[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:a})),[l,d]=g({queryString:i,groupId:t}),[h,u]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[i,t]=(0,p.Dv)(n);return[i,(0,s.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),m=(()=>{const e=l??h;return j({value:e,tabValues:a})?e:null})();(0,c.A)(()=>{m&&o(m)},[m]);return{selectedValue:r,selectValue:(0,s.useCallback)(e=>{if(!j({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),u(e)},[d,u,a]),tabValues:a}}var f=i(2303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b({className:e,block:n,selectedValue:i,selectValue:t,tabValues:r}){const s=[],{blockElementScrollPositionUntilNextRender:d}=(0,l.a_)(),c=e=>{const n=e.currentTarget,a=s.indexOf(n),o=r[a].value;o!==i&&(d(n),t(o))},h=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const i=s.indexOf(e.currentTarget)+1;n=s[i]??s[0];break}case"ArrowLeft":{const i=s.indexOf(e.currentTarget)-1;n=s[i]??s[s.length-1];break}}n?.focus()};return(0,a.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":n},e),children:r.map(({value:e,label:n,attributes:t})=>(0,a.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{s.push(e)},onKeyDown:h,onClick:c,...t,className:(0,o.A)("tabs__item",y.tabItem,t?.className,{"tabs__item--active":i===e}),children:n??e},e))})}function A({lazy:e,children:n,selectedValue:i}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===i);return e?(0,s.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,a.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==i}))})}function w(e){const n=v(e);return(0,a.jsxs)("div",{className:(0,o.A)("tabs-container",y.tabList),children:[(0,a.jsx)(b,{...n,...e}),(0,a.jsx)(A,{...n,...e})]})}function k(e){const n=(0,f.A)();return(0,a.jsx)(w,{...e,children:m(e.children)},String(n))}const E={tabItem:"tabItem_Ymn6"};function S({children:e,hidden:n,className:i}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,o.A)(E.tabItem,i),hidden:n,children:e})}var R=i(1028);const _={sidebar_position:1,title:"SDK Quickstart",description:"Complete guide to integrate Video Calling SDK across multiple platforms including JavaScript, React Native, Java, C++, and C# with code examples and best practices."},C=void 0,T={},I=[{value:"Overview",id:"overview",level:2},{value:"Project setup",id:"project-setup",level:2},{value:"Integrate the SDK",id:"integrate-the-sdk",level:2},{value:"Implement the logic",id:"implement-the-logic",level:2},{value:"1. Set up the UI",id:"1-set-up-the-ui",level:3},{value:"2. Add the required variables",id:"2-add-the-required-variables",level:3},{value:"3. Request microphone and camera permissions",id:"3-request-microphone-and-camera-permissions",level:3},{value:"4. Initialize the SDK",id:"4-initialize-the-sdk",level:3},{value:"5. Enable the local video",id:"5-enable-the-local-video",level:3},{value:"6. Display the local video",id:"6-display-the-local-video",level:3},{value:"7. Join the channel",id:"7-join-the-channel",level:3},{value:"8. Dislay the remote view",id:"8-dislay-the-remote-view",level:3},{value:"9. Leave the channel",id:"9-leave-the-channel",level:3},{value:"Test the app",id:"test-the-app",level:2}];function N(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"This guide lets you implement Video Calling in your Android app using the Agora Video SDK."}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"The image shows how the Agora SDK connects your application to the Agora network. Think of it as a simple, two-step process:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"User devices to Agora"}),": The Agora SDK is the piece of software in your app that captures real-time video, audio, and data. It sends this information to the Agora Software Defined Real-time Network (SDRTN) through the closest Access Point or Edge Node."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Agora to user devices"}),": Once the data hits the SDRTN, the network takes over. It uses a Global Mesh Network to quickly route the information to the other user's app, delivering it in real-time."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Essentially, the diagram illustrates the data flow from your device to SDRTN and out to the other users."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Agora Tech",src:i(9066).A+"",width:"1007",height:"601"})}),"\n",(0,a.jsx)(n.h2,{id:"project-setup",children:"Project setup"}),"\n",(0,a.jsx)(n.p,{children:"This section shows you how to set up your Android project:"}),"\n",(0,a.jsxs)(k,{children:[(0,a.jsxs)(S,{value:"new",label:"Create a new project",default:!0,children:[(0,a.jsxs)(n.p,{children:["Create a ",(0,a.jsx)(n.a,{href:"https://developer.android.com/studio/projects/create-project",children:"new project"}),"."]}),(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Open Android Studio and select ",(0,a.jsx)(n.strong,{children:"File > New > New Project..."}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Select ",(0,a.jsx)(n.strong,{children:"Phone and Tablet"})," > ",(0,a.jsx)(n.strong,{children:"Empty Activity"})," and click ",(0,a.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,a.jsx)(n.li,{children:"Set the project name and storage path."}),"\n",(0,a.jsxs)(n.li,{children:["Select ",(0,a.jsx)(n.strong,{children:"Java"})," or ",(0,a.jsx)(n.strong,{children:"Kotlin"})," as the language, and click ",(0,a.jsx)(n.strong,{children:"Finish"})," to create the Android project."]}),"\n"]}),(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Note:"})," After you create a project, Android Studio automatically starts gradle sync. Ensure that the synchronization is successful before proceeding to the next step."]}),"\n"]})]}),(0,a.jsxs)(S,{value:"existing",label:"Add to an existing project",children:[(0,a.jsx)(n.p,{children:"Add a new activity to your project."}),(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Open your project in Android Studio."}),"\n",(0,a.jsxs)(n.li,{children:["Right-click on the ",(0,a.jsx)(n.code,{children:"app/src/main/java/<your.package.name>"})," folder."]}),"\n",(0,a.jsxs)(n.li,{children:["Select ",(0,a.jsx)(n.strong,{children:"New \u2192 Activity \u2192 Empty Activity"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Enter an activity name and click ",(0,a.jsx)(n.strong,{children:"Finish"}),".\nThis guide uses ",(0,a.jsx)(n.code,{children:"MainActivity"})," as the activity name in the sample code. Replace it with your activity name where required."]}),"\n"]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"integrate-the-sdk",children:"Integrate the SDK"}),"\n",(0,a.jsx)(n.p,{children:"Use either of the following methods to add the Video SDK to your project."}),"\n",(0,a.jsxs)(k,{children:[(0,a.jsx)(S,{value:"tab1",label:"Maven Central",default:!0,children:(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Open the ",(0,a.jsx)(n.code,{children:"settings.gradle"})," file in the project's root directory and add the Maven Central dependency, if it doesn't already exist:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-groovy",children:"repositories {\n   mavenCentral()\n}\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["To integrate the Video SDK into your Android project, add the following to the ",(0,a.jsx)(n.code,{children:"dependencies"})," block in your project module ",(0,a.jsx)(n.code,{children:"build.gradle"})," file:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Groovy ",(0,a.jsx)(n.code,{children:"build.gradle"})]}),"\n",(0,a.jsx)(R.A,{language:"json",children:"implementation 'io.agora.rtc:full-sdk:x.y.z'"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Kotlin ",(0,a.jsx)(n.code,{children:"build.gradle.kts"})]}),"\n",(0,a.jsx)(R.A,{language:"kotlin",children:'implementation("io.agora.rtc:full-sdk:x.y.z")'}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Replace ",(0,a.jsx)(n.code,{children:"x.y.z"})," with the specific SDK version number, such as ",(0,a.jsx)(n.code,{children:"4.6.0"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Prevent code obfuscation"}),"\n",(0,a.jsxs)(n.p,{children:["Open the ",(0,a.jsx)(n.code,{children:"/app/proguard-rules.pro"})," file and add the following lines to prevent the Video SDK code from being obfuscated:"]}),"\n",(0,a.jsx)(R.A,{language:"java",children:"-keep class io.agora.** { *; }\n-dontwarn io.agora.**"}),"\n"]}),"\n"]})}),(0,a.jsx)(S,{value:"tab2",label:"Manual integration",children:(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Download the latest version of Video SDK from the  the ",(0,a.jsx)(n.a,{href:"https://docs.agora.io/en/sdks",children:"SDKs"})," page and unzip it."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Open the unzipped file and copy the following files or subfolders to your project path."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{style:{textAlign:"left"},children:"File or folder"}),(0,a.jsx)(n.th,{style:{textAlign:"left"},children:"Project path"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,a.jsx)(n.code,{children:"agora-rtc-sdk.jar"})," file"]}),(0,a.jsx)(n.td,{style:{textAlign:"left"},children:(0,a.jsx)(n.code,{children:"/app/libs/"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,a.jsx)(n.code,{children:"arm64-v8a"})," folder"]}),(0,a.jsx)(n.td,{style:{textAlign:"left"},children:(0,a.jsx)(n.code,{children:"/app/src/main/jniLibs/"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,a.jsx)(n.code,{children:"armeabi-v7a"})," folder"]}),(0,a.jsx)(n.td,{style:{textAlign:"left"},children:(0,a.jsx)(n.code,{children:"/app/src/main/jniLibs/"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,a.jsx)(n.code,{children:"x86"})," folder"]}),(0,a.jsx)(n.td,{style:{textAlign:"left"},children:(0,a.jsx)(n.code,{children:"/app/src/main/jniLibs/"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,a.jsx)(n.code,{children:"x86_64"})," folder"]}),(0,a.jsx)(n.td,{style:{textAlign:"left"},children:(0,a.jsx)(n.code,{children:"/app/src/main/jniLibs/"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,a.jsx)(n.code,{children:"high_level_api"})," in ",(0,a.jsx)(n.code,{children:"include"})," folder"]}),(0,a.jsx)(n.td,{style:{textAlign:"left"},children:(0,a.jsx)(n.code,{children:"/app/src/main/jniLibs/"})})]})]})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Select the file ",(0,a.jsx)(n.code,{children:"/app/libs/agora-rtc-sdk.jar"})," in the left navigation bar of Android Studio project files, right-click, and select ",(0,a.jsx)(n.strong,{children:"add as a library"})," from the drop-down menu."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Prevent code obfuscation"}),"\n",(0,a.jsxs)(n.p,{children:["Open the ",(0,a.jsx)(n.code,{children:"/app/proguard-rules.pro"})," file and add the following lines to prevent the Video SDK code from being obfuscated:"]}),"\n",(0,a.jsx)(R.A,{language:"java",children:"-keep class io.agora.** { *; }\n-dontwarn io.agora.**"}),"\n"]}),"\n"]})})]}),"\n",(0,a.jsx)(n.h2,{id:"implement-the-logic",children:"Implement the logic"}),"\n",(0,a.jsx)(n.p,{children:"Follow these steps to implement video calling."}),"\n",(0,a.jsx)(n.h3,{id:"1-set-up-the-ui",children:"1. Set up the UI"}),"\n",(0,a.jsxs)(n.p,{children:["Add frames for local and remote video in ",(0,a.jsx)(n.code,{children:"/app/res/layout/activity_main.xml"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"\n    xmlns:tools="http://schemas.android.com/tools"\n    android:id="@+id/activity_main"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent"\n    tools:context=".MainActivity">\n\n    <FrameLayout\n        android:id="@+id/local_video_view_container"\n        android:layout_width="match_parent"\n        android:layout_height="match_parent"\n        android:background="@android:color/white" />\n\n    <FrameLayout\n        android:id="@+id/remote_video_view_container"\n        android:layout_width="160dp"\n        android:layout_height="160dp"\n        android:layout_alignParentEnd="true"\n        android:layout_alignParentRight="true"\n        android:layout_alignParentTop="true"\n        android:layout_marginEnd="16dp"\n        android:layout_marginRight="16dp"\n        android:layout_marginTop="16dp"\n        android:background="@android:color/darker_gray" />\n\n</RelativeLayout>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-add-the-required-variables",children:"2. Add the required variables"}),"\n",(0,a.jsxs)(n.p,{children:["In ",(0,a.jsx)(n.code,{children:"MainActivity"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:'companion object {\n    private const val PERMISSION_REQ_ID = 22\n}\nprivate val myAppId = "<Your app ID>"\nprivate val channelName = "<Your channel name>"\nprivate val token = "<Your token>"\nprivate var mRtcEngine: RtcEngine? = null\n'})}),"\n",(0,a.jsx)(n.h3,{id:"3-request-microphone-and-camera-permissions",children:"3. Request microphone and camera permissions"}),"\n",(0,a.jsxs)(n.p,{children:["When your app starts, request the required permissions. if granted, call ",(0,a.jsx)(n.code,{children:"initializeAgoraVideoSDK"})," to start Video Calling. To implement this logic, do the following:"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Add these permissions to ",(0,a.jsx)(n.code,{children:"AndroidManifest.xml"})," before ",(0,a.jsx)(n.code,{children:"<application>"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<uses-feature android:name="android.hardware.camera" android:required="false" />\n\x3c!--Required permissions--\x3e\n<uses-permission android:name="android.permission.INTERNET"/>\n<uses-permission android:name="android.permission.CAMERA"/>\n<uses-permission android:name="android.permission.RECORD_AUDIO"/>\n<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>\n\x3c!--Optional permissions--\x3e\n<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>\n<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>\n<uses-permission android:name="android.permission.BLUETOOTH"/>\n\x3c!-- For devices running Android 12 (API level 32) or higher and integrating Agora Video SDK version v4.1.0 or lower, you also need to add the following permissions --\x3e\n<uses-permission android:name="android.permission.BLUETOOTH_CONNECT"/>\n\x3c!-- For Android 12.0 or higher, the following permissions are also required --\x3e\n<uses-permission android:name="android.permission.READ_PHONE_STATE"/>\n<uses-permission android:name="android.permission.BLUETOOTH_SCAN"/>\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["In ",(0,a.jsx)(n.code,{children:"/app/java/com.example.<projectname>/MainActivity"}),", add the following to the ",(0,a.jsx)(n.code,{children:"MainActivity"})," class:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"private fun checkPermissions(): Boolean {\n    return getRequiredPermissions().all {\n        ContextCompat.checkSelfPermission(this, it) == PackageManager.PERMISSION_GRANTED\n    }\n}\n\nprivate fun getRequiredPermissions(): Array<String> {\n    return if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.S) {\n        arrayOf(\n            Manifest.permission.RECORD_AUDIO,\n            Manifest.permission.CAMERA,\n            Manifest.permission.READ_PHONE_STATE,\n            Manifest.permission.BLUETOOTH_CONNECT\n        )\n    } else {\n        arrayOf(\n            Manifest.permission.RECORD_AUDIO,\n            Manifest.permission.CAMERA\n        )\n    }\n}\n\noverride fun onRequestPermissionsResult(\n    requestCode: Int,\n    permissions: Array<out String>,\n    grantResults: IntArray\n) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n    if (requestCode == PERMISSION_REQ_ID && checkPermissions()) {\n        startVideoCalling()\n    }\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"4-initialize-the-sdk",children:"4. Initialize the SDK"}),"\n",(0,a.jsxs)(n.p,{children:["In ",(0,a.jsx)(n.code,{children:"MainActivity"}),", add the following before ",(0,a.jsx)(n.code,{children:"onRequestPermissionsResult"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:'private fun initializeAgoraVideoSDK() {\n  try {\n      val config = RtcEngineConfig().apply {\n          mContext = applicationContext\n          mAppId = myAppId\n          mEventHandler = mRtcEventHandler\n      }\n      mRtcEngine = RtcEngine.create(config)\n  } catch (e: Exception) {\n      throw RuntimeException("Error initializing RTC engine: ${e.message}")\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"5-enable-the-local-video",children:"5. Enable the local video"}),"\n",(0,a.jsxs)(n.p,{children:["Before you join a channel, configure the local video source. Call ",(0,a.jsx)(n.code,{children:"enableVideo"})," and ",(0,a.jsx)(n.code,{children:"startPreview"})," to enable the video source and keep the camera ready for Video Calling. To implement this logic, add the following to the ",(0,a.jsx)(n.code,{children:"MainActivity"})," class:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"private fun enableVideo() {\n  mRtcEngine?.apply {\n      enableVideo()\n      startPreview()\n  }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"6-display-the-local-video",children:"6. Display the local video"}),"\n",(0,a.jsxs)(n.p,{children:["To render the local camera feed on a ",(0,a.jsx)(n.code,{children:"SurfaceView"}),", in ",(0,a.jsx)(n.code,{children:"MainActivity"}),", add the following"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"private fun setupLocalVideo() {\n  val container: FrameLayout = findViewById(R.id.local_video_view_container)\n  val surfaceView = SurfaceView(baseContext)\n  container.addView(surfaceView)\n  mRtcEngine?.setupLocalVideo(VideoCanvas(surfaceView, VideoCanvas.RENDER_MODE_FIT, 0))\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"At this point, you are ready to join a channel."}),"\n",(0,a.jsx)(n.h3,{id:"7-join-the-channel",children:"7. Join the channel"}),"\n",(0,a.jsxs)(n.p,{children:["To join a channel, you need a valid authentication token and channel name. In ",(0,a.jsx)(n.code,{children:"MainActivity"}),", add this function to handle the join operation:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"    private fun joinChannel() {\n  val options = ChannelMediaOptions().apply {\n      clientRoleType = Constants.CLIENT_ROLE_BROADCASTER\n      channelProfile = Constants.CHANNEL_PROFILE_COMMUNICATION\n      publishMicrophoneTrack = true\n      publishCameraTrack = true\n  }\n  mRtcEngine?.joinChannel(token, channelName, 0, options)\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"8-dislay-the-remote-view",children:"8. Dislay the remote view"}),"\n",(0,a.jsx)(n.p,{children:"When a remote user joins, the app must render their video stream. The event handler calls this method to display the remote feed:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"private fun setupRemoteVideo(uid: Int) {\n  val container: FrameLayout = findViewById(R.id.remote_video_view_container)\n  val surfaceView = SurfaceView(applicationContext).apply {\n      setZOrderMediaOverlay(true)\n      container.addView(this)\n  }\n  mRtcEngine?.setupRemoteVideo(VideoCanvas(surfaceView, VideoCanvas.RENDER_MODE_FIT, uid))\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"9-leave-the-channel",children:"9. Leave the channel"}),"\n",(0,a.jsxs)(n.p,{children:["When the call ends, clean up resources by leaving the channel and stopping the preview. Add this method to ",(0,a.jsx)(n.code,{children:"MainActivity"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"private fun cleanupAgoraEngine() {\n  mRtcEngine?.apply {\n      stopPreview()\n      leaveChannel()\n  }\n  mRtcEngine = null\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"test-the-app",children:"Test the app"}),"\n",(0,a.jsx)(n.p,{children:"To test this project, take the following steps:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Replace the ",(0,a.jsx)(n.code,{children:"myAppId"}),", ",(0,a.jsx)(n.code,{children:"channelName"}),", and ",(0,a.jsx)(n.code,{children:"token"})," with values from ",(0,a.jsx)(n.a,{href:"https://console.agora.io/v2",children:"Agora Console"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Run the app on a simulator or physical device in Android Studio."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Grant the required permissions when prompted."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"The local video appears on the screen."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Install the same app on another device and join the same channel.\nYou should see both local and remote video streams."}),"\n"]}),"\n"]})]})}function D(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(N,{...e})}):N(e)}},9066:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/agora-tech-7b78adc3b256924c5191f536d8f1d32d.png"}}]);